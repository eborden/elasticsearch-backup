#!/usr/bin/env node
                                                                                                       
'use strict';                                                                                          
                                                                                                       
var backup = require('../build/src/backup.js'),                                                         
    prom = require('../build/src/promiscuous-config.js'),
    options = {};

maybe(options, 'host', process.argv[3]);                                                               
maybe(options, 'port', process.argv[4]);
maybe(options, 'filePath', process.argv[5]);                                                           

switch (process.argv[2]) {
    case 'pack':
        maybe(options, 'index', process.argv[6]);                                                              
        maybe(options, 'type', process.argv[7]);                                                               
        return backup.pack(options);
    case 'unpack':
        maybe(options, 'version', process.argv[6]);                                                              
        return backup.unpack(options);
    default:
        return console.log('WTF, where are your arguments');
}
                                                                                                       
function maybe (object, name, value) {                                                                 
    if (value) {                                                                                       
        object[name] = value;                                                                          
    }                                                                                                  
    return object;                                                                                     
}   

